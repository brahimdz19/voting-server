<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµÙˆÙŠØª - Ù…Ø¨Ø³Ø· ÙˆÙ…Ø­Ø³Ù‘Ù†</title>
<style>
  :root{
    --primary: #667eea;
    --accent: #764ba2;
    --glass: rgba(255,255,255,0.85);
  }
  *{box-sizing:border-box}
  body{
    margin:0;font-family:"Segoe UI",Tahoma,Arial;
    background: linear-gradient(135deg,var(--primary),var(--accent));
    min-height:100vh;display:flex;align-items:center;justify-content:center;padding:24px;
    color:#222;
  }

  /* Ø¨Ø·Ø§Ù‚Ø© */
  .card{
    width:100%;max-width:820px;background:var(--glass);
    border-radius:16px;padding:22px;box-shadow:0 20px 50px rgba(0,0,0,0.25);
    transform: translateY(0); transition: transform .35s;
  }
  .card:hover{ transform: translateY(-6px) }

  h1{margin:0 0 10px;font-size:20px;color: #222}
  p.lead{margin:0 0 18px;color:#444}

  form{display:grid;gap:12px}
  label{font-weight:600;color:#333;font-size:14px;text-align:right}
  input[type="text"]{
    width:100%;padding:10px;border-radius:8px;border:1px solid #e6e6e6;font-size:15px;
  }

  .options{display:flex;gap:12px;justify-content:space-between;align-items:center}
  .option{
    flex:1;padding:12px;border-radius:10px;border:2px solid #eee;background:#fff;cursor:pointer;
    display:flex;align-items:center;gap:10px;transition:all .2s;
  }
  .option:hover{transform:translateY(-4px);box-shadow:0 10px 20px rgba(0,0,0,0.08)}
  .option.selected{background:linear-gradient(90deg,var(--primary),var(--accent));color:white;border-color:transparent}

  .row {display:flex;gap:10px}
  .btn {
    background:linear-gradient(90deg,var(--primary),var(--accent));color:white;border:none;padding:10px 16px;border-radius:10px;
    cursor:pointer;font-weight:700;box-shadow:0 8px 18px rgba(102,126,234,0.25);
  }
  .btn.secondary{background:#eee;color:#333;box-shadow:none}

  .results{margin-top:18px}
  .bar{height:36px;background:#f1f3f8;border-radius:10px;overflow:hidden;display:flex;align-items:center}
  .fill{height:100%;display:flex;align-items:center;justify-content:center;color:white;font-weight:700;transition:width .6s}

  .voters{margin-top:12px;text-align:right}
  .voter{padding:8px 10px;border-radius:8px;background:#fff;margin-bottom:8px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 6px 14px rgba(0,0,0,0.04)}

  /* modal */
  .modal-back{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.55);z-index:40}
  .modal{background:white;padding:18px;border-radius:12px;max-width:520px;width:94%;box-shadow:0 20px 50px rgba(0,0,0,0.45)}
  .modal h2{margin:0 0 8px}
  .modal p{margin:0 0 12px;color:#555}

  .confetti{position:fixed;pointer-events:none;z-index:60}

  /* admin area small */
  .admin-panel{margin-top:14px;padding:12px;background:linear-gradient(90deg,#fff9db,#fff2c2);border-radius:10px;border:1px solid #ffeaa7}
  .danger{background:linear-gradient(90deg,#ff6b6b,#ff4d4d);}

  @media (max-width:600px){
    .options{flex-direction:column}
    .option{width:100%}
  }
</style>
</head>
<body>
  <div class="card" id="mainCard" aria-live="polite">
    <h1>ğŸ—³ï¸ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØµÙˆÙŠØª Ø§Ù„Ù…Ø­Ø³Ù‘Ù†</h1>
    <p class="lead">Ø§Ø®ØªØ± Ø®ÙŠØ§Ø±Ùƒ Ø¨Ø³Ø±Ø¹Ø© â€” Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ÙŠØªØ­Ø¯Ù‘Ø« ÙÙˆØ±Ù‹Ø§ Ø¨Ø¹Ø¯ ÙƒÙ„ ØªØµÙˆÙŠØª.</p>

    <form id="voteForm">
      <label for="name">ğŸ‘¤ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
      <input id="name" type="text" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ" autocomplete="off" />

      <label>ğŸ“‹ Ø§Ø®ØªØ± Ø£Ø­Ø¯ Ø§Ù„Ø®ÙŠØ§Ø±ÙŠÙ†</label>
      <div class="options" id="options">
        <div class="option" data-val="A" onclick="pick(this)">
          <input type="radio" name="choice" value="A" style="display:none" />
          <div>
            <strong>Ø§Ù„Ø®ÙŠØ§Ø± A</strong><div style="font-size:13px;color:#666">Ø§Ù„ÙˆØµÙ Ø£Ùˆ Ù…Ù„Ø§Ø­Ø¸Ø© Ù‚ØµÙŠØ±Ø©</div>
          </div>
        </div>
        <div class="option" data-val="B" onclick="pick(this)">
          <input type="radio" name="choice" value="B" style="display:none" />
          <div>
            <strong>Ø§Ù„Ø®ÙŠØ§Ø± B</strong><div style="font-size:13px;color:#666">Ø§Ù„ÙˆØµÙ Ø£Ùˆ Ù…Ù„Ø§Ø­Ø¸Ø© Ù‚ØµÙŠØ±Ø©</div>
          </div>
        </div>
      </div>

      <label>ğŸ”’ ØªØ­Ù‚Ù‚ Ø£Ù…Ù†ÙŠ â€” Ø£Ø¬Ø¨ Ø§Ù„Ù…Ø³Ø£Ù„Ø©</label>
      <div class="row" style="align-items:center;justify-content:space-between">
        <div id="captchaQuestion" style="font-weight:700"></div>
        <input id="captchaAnswer" type="text" placeholder="Ø§Ù„Ø¬ÙˆØ§Ø¨" style="width:120px;padding:8px;border-radius:8px;border:1px solid #ddd" />
      </div>

      <div style="display:flex;gap:10px;margin-top:12px">
        <button type="button" class="btn" onclick="submitVote()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØµÙˆÙŠØª</button>
        <button type="button" class="btn secondary" onclick="openAdmin()">ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¯ÙŠØ±</button>
      </div>
    </form>

    <div class="results" aria-live="polite">
      <h3>ğŸ“ˆ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h3>

      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>Ø§Ù„Ø®ÙŠØ§Ø± A <span id="percentA">0%</span></div>
        <div style="width:65%"><div class="bar"><div id="barA" class="fill" style="width:0%;background:linear-gradient(90deg,var(--primary),var(--accent))">0</div></div></div>
      </div>

      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
        <div>Ø§Ù„Ø®ÙŠØ§Ø± B <span id="percentB">0%</span></div>
        <div style="width:65%"><div class="bar"><div id="barB" class="fill" style="width:0%;background:linear-gradient(90deg,#4cd137,#00b894)">0</div></div></div>
      </div>

      <div class="voters" id="votersWrap">
        <h4 style="margin:12px 0 8px">ğŸ“‹ Ø§Ù„Ù…ØµÙˆØªÙˆÙ† (<span id="totalVoters">0</span>)</h4>
        <div id="votersList"></div>
      </div>
    </div>
  </div>

  <!-- Modal Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ -->
  <div id="entryModal" class="modal-back" style="display:flex">
    <div class="modal">
      <h2>Ù…Ø±Ø­Ø¨Ù‹Ø§ ğŸ‘‹</h2>
      <p>Ø§Ø¶ØºØ· Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„ØªØµÙˆÙŠØª. ØµÙˆØªÙƒ Ø³ÙŠÙØ³Ø¬Ù‘Ù„ Ø¨Ø£Ù…Ø§Ù†.</p>
      <div style="text-align:center;margin-top:12px">
        <button class="btn" onclick="closeEntry()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
      </div>
    </div>
  </div>

  <!-- Modal Ù†Ø¬Ø§Ø­ -->
  <div id="successModal" class="modal-back" style="display:none">
    <div class="modal">
      <h2>âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØªØµÙˆÙŠØª</h2>
      <p>Ø´ÙƒØ±Ù‹Ø§ Ù„Ù…Ø´Ø§Ø±ÙƒØªÙƒ! ØªÙ… ØªØ³Ø¬ÙŠÙ„ ØµÙˆØªÙƒ Ø¨Ù†Ø¬Ø§Ø­.</p>
      <div style="text-align:center">
        <button class="btn" onclick="closeSuccess()">Ø±Ø§Ø¦Ø¹</button>
      </div>
    </div>
  </div>

  <!-- Modal Ø§Ù„Ù…Ø¯ÙŠØ± -->
  <div id="adminModal" class="modal-back" style="display:none">
    <div class="modal">
      <h2>ğŸ”’ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯ÙŠØ±</h2>
      <p>Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø¯ÙŠØ± Ù„Ø¹Ø±Ø¶ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ­Ø°Ù Ø§Ù„ØªØµÙˆÙŠØªØ§Øª.</p>
      <input id="adminPass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" style="width:100%;padding:10px;border-radius:8px;border:1px solid #ddd;margin-bottom:10px" />
      <div style="display:flex;gap:10px;justify-content:flex-end">
        <button class="btn secondary" onclick="closeAdmin()">Ø¥Ù„ØºØ§Ø¡</button>
        <button class="btn" onclick="tryAdmin()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
      </div>
      <div id="adminArea" style="margin-top:12px;display:none">
        <div class="admin-panel">
          <strong>Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ±</strong>
          <p style="margin:8px 0 10px;color:#555">ÙŠÙ…ÙƒÙ†Ùƒ Ø­Ø°Ù Ø£ÙŠ ØªØµÙˆÙŠØª Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø³Ù„Ø© Ø§Ù„Ø­Ø°Ù.</p>
          <div id="adminVoters"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="confettiRoot" class="confetti"></div>

<script>
/* ====== Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ====== */
const API_BASE = ""; // ÙØ§Ø±Øº => Ù†ÙØ³ Ø§Ù„Ø®Ø§Ø¯Ù…ØŒ Ø£ÙŠ "/vote" Ùˆ"/votes"
let captchaAnswer = 0;
let votesCache = [];
let adminLogged = false;

/* ====== Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ù€ CAPTCHA ====== */
function closeEntry(){ document.getElementById('entryModal').style.display='none' }
function generateCaptcha(){
  const a = Math.floor(Math.random()*9)+1;
  const b = Math.floor(Math.random()*9)+1;
  captchaAnswer = a + b;
  document.getElementById('captchaQuestion').textContent = `${a} + ${b} = ØŸ`;
}
generateCaptcha();

/* ====== Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø®ÙŠØ§Ø± ====== */
function pick(el){
  document.querySelectorAll('.option').forEach(o => o.classList.remove('selected'));
  el.classList.add('selected');
  const radio = el.querySelector('input[type=radio]');
  if(radio) radio.checked = true;
}

/* ====== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù… ====== */
async function loadVotes(){
  try{
    const res = await fetch((API_BASE||"") + "/votes");
    if(!res.ok) throw new Error("network");
    const data = await res.json();
    votesCache = Array.isArray(data) ? data : data.votes || [];
    renderResults();
  }catch(err){
    console.error("loadVotes error",err);
    // Ù„Ø§ Ù†Ø¸Ù‡Ø± ØªÙ†Ø¨ÙŠÙ‡ Ù…Ø²Ø¹Ø¬ ÙƒÙ„ Ù…Ø±Ø© Ù„ÙƒÙ† ÙŠÙ…ÙƒÙ† Ø§Ø¸Ù‡Ø§Ø± ØµØºÙŠØ±
    // showToast("âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…!");
  }
}

/* ====== Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ§Ù„Ù…ØµÙˆØªÙŠÙ† ====== */
function renderResults(){
  const votes = votesCache || [];
  const countA = votes.filter(v=>v.choice==='A').length;
  const countB = votes.filter(v=>v.choice==='B').length;
  const total = votes.length;
  const percentA = total? Math.round((countA/total)*100) : 0;
  const percentB = total? Math.round((countB/total)*100) : 0;

  document.getElementById('percentA').textContent = percentA + '%';
  document.getElementById('percentB').textContent = percentB + '%';
  document.getElementById('barA').style.width = percentA + '%';
  document.getElementById('barB').style.width = percentB + '%';
  document.getElementById('barA').textContent = countA;
  document.getElementById('barB').textContent = countB;
  document.getElementById('totalVoters').textContent = total;

  // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØµÙˆØªÙŠÙ†
  const list = document.getElementById('votersList');
  list.innerHTML = '';
  votes.forEach((v, idx) => {
    const div = document.createElement('div');
    div.className = 'voter';
    div.innerHTML = `<div style="text-align:right">${escapeHtml(v.name)} <div style="font-size:12px;color:#888">${v.timestamp||''}</div></div>
                     <div style="display:flex;gap:8px;align-items:center">
                       ${adminLogged? `<button class="btn danger" style="padding:6px 8px;font-size:13px" onclick="deleteVote(${idx})">Ø­Ø°Ù</button>` : ''}
                     </div>`;
    list.appendChild(div);
  });

  // admin view list
  const adminV = document.getElementById('adminVoters');
  if(adminV){
    adminV.innerHTML = votes.map((v,i)=>`<div style="display:flex;justify-content:space-between;align-items:center;padding:6px;background:#fff;margin-bottom:6px;border-radius:6px">
      <div style="text-align:right">${escapeHtml(v.name)} <div style="font-size:12px;color:#888">${v.timestamp||''}</div></div>
      <div><button class="btn danger" style="padding:6px 8px" onclick="deleteVote(${i})">Ø­Ø°Ù</button></div>
    </div>`).join('');
  }
}

/* ====== Ø¥Ø±Ø³Ø§Ù„ ØªØµÙˆÙŠØª ====== */
async function submitVote(){
  const name = document.getElementById('name').value.trim();
  const choiceEl = document.querySelector('input[name="choice"]:checked');
  const ans = parseInt(document.getElementById('captchaAnswer').value);

  if(!name){ alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…'); return; }
  if(!choiceEl){ alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø®ÙŠØ§Ø±'); return; }
  if(ans !== captchaAnswer){ alert('ØªØ­Ù‚Ù‚ Ø®Ø§Ø·Ø¦'); generateCaptcha(); return; }

  // Ù…Ù†Ø¹ ØªÙƒØ±Ø§Ø± Ø¨Ø§Ù„Ø§Ø³Ù… ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
  if(votesCache.some(v=>v.name.toLowerCase()===name.toLowerCase())){ alert('Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨Ø§Ù„ØªØµÙˆÙŠØª Ù…Ø³Ø¨Ù‚Ø§Ù‹'); return; }

  try{
    const res = await fetch((API_BASE||"") + '/vote', {
      method:'POST', headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ name, choice: choiceEl.value, timestamp: new Date().toLocaleString('ar-DZ') })
    });
    const data = await res.json();
    if(data.success){
      showSuccess();
      // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù…
      await loadVotes();
      // ØªØ£Ø«ÙŠØ± ÙƒÙˆÙ†ÙÙŠØªÙŠ
      burstConfetti();
      // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„
      document.getElementById('name').value = '';
      document.querySelectorAll('.option').forEach(o=>o.classList.remove('selected'));
      document.querySelectorAll('input[name="choice"]').forEach(i=>i.checked=false);
      generateCaptcha();
    } else {
      alert(data.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø­ÙØ¸');
    }
  }catch(err){
    console.error('submitVote',err);
    alert('âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…!');
  }
}

/* ====== Ø­Ø°Ù ØªØµÙˆÙŠØª (ÙŠØªØ·Ù„Ø¨ Ø®Ø§Ø¯Ù… ÙŠØ¯Ø¹Ù… endpoint) ====== */
async function deleteVote(index){
  if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØªØµÙˆÙŠØªØŸ')) return;
  const pass = prompt('Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø¯ÙŠØ± Ù„ØªÙ†ÙÙŠØ° Ø§Ù„Ø­Ø°Ù:');
  if(!pass) return;

  try{
    const res = await fetch((API_BASE||"") + '/delete-vote', {
      method:'POST', headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ index, password: pass })
    });
    const data = await res.json();
    if(data.success){
      alert('âœ… ØªÙ… Ø§Ù„Ø­Ø°Ù');
      adminLogged = true; // Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø¯ÙŠØ± Ø¥Ù† Ù†Ø¬Ø­
      loadVotes();
    } else {
      alert(data.message || 'ÙØ´Ù„ Ø§Ù„Ø­Ø°Ù');
    }
  }catch(err){
    console.error('deleteVote',err);
    alert('âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…!');
  }
}

/* ====== Ù†Ø§ÙØ°Ø© Ù†Ø¬Ø§Ø­ ÙˆØªØ§Ø«ÙŠØ±Ø§Øª ====== */
function showSuccess(){ document.getElementById('successModal').style.display='flex' }
function closeSuccess(){ document.getElementById('successModal').style.display='none' }

function openAdmin(){ document.getElementById('adminModal').style.display='flex' }
function closeAdmin(){ document.getElementById('adminModal').style.display='none'; document.getElementById('adminArea').style.display='none' }

function tryAdmin(){
  const pass = document.getElementById('adminPass').value;
  if(!pass){ alert('Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±'); return; }
  // Ù†Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„ØªØ­Ù‚Ù‚ (ÙŠÙ…ÙƒÙ† Ø£Ù† ÙŠÙƒÙˆÙ† endpoint Ø®Ø§Øµ)
  fetch((API_BASE||"") + '/admin-check', {
    method:'POST', headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ password: pass })
  }).then(r=>r.json()).then(data=>{
    if(data.success){
      adminLogged = true;
      document.getElementById('adminArea').style.display = 'block';
      document.getElementById('adminPass').value = '';
      renderResults();
    } else {
      alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©');
    }
  }).catch(()=>alert('ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…'));
}

/* ====== Confetti Ø¨Ø³ÙŠØ· ====== */
function burstConfetti(){
  const root = document.getElementById('confettiRoot');
  for(let i=0;i<40;i++){
    const el = document.createElement('div');
    el.style.position='absolute'; el.style.left = (20 + Math.random()*60) + '%';
    el.style.top = '-10%'; el.style.width='10px'; el.style.height='10px';
    el.style.background = ['#ff6b6b','#ffb86b','#6bcfff','#9b59b6','#2ecc71'][Math.floor(Math.random()*5)];
    el.style.borderRadius='2px'; el.style.opacity='0.95';
    el.style.transform = `translateY(0) rotate(${Math.random()*360}deg)`;
    el.style.transition = 'transform 1.2s ease, top 1.2s ease, opacity 1.2s';
    root.appendChild(el);
    setTimeout(()=>{ el.style.top = (60 + Math.random()*30) + '%'; el.style.transform = 'translateY(50px) rotate(360deg)'; el.style.opacity='0'; }, 50 + i*10);
    setTimeout(()=>el.remove(), 1500 + i*30);
  }
}

/* ====== Helpers ====== */
function escapeHtml(s){ return String(s||'').replace(/[&<>"']/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' })[c]) }

/* ====== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ====== */
loadVotes();
setInterval(loadVotes, 7000); // ØªØ­Ø¯ÙŠØ« Ø¯ÙˆØ±ÙŠ
</script>
</body>
</html>
